{
  "$ref": "#/definitions/AdvancedScreenplayModuleResult",
  "definitions": {
    "AdvancedScreenplayModuleResult": {
      "type": "object",
      "properties": {
        "title": {
          "type": "string",
          "minLength": 1
        },
        "summary": {
          "type": "string",
          "minLength": 1
        },
        "metadata": {
          "type": "object",
          "properties": {
            "workId": {
              "type": "string",
              "minLength": 1
            },
            "workTitle": {
              "type": "string",
              "minLength": 1
            },
            "workFormat": {
              "type": "string",
              "enum": [
                "feature_film",
                "short_film",
                "series",
                "limited_series",
                "stage_play",
                "web_series",
                "documentary",
                "podcast_script",
                "novel_adaptation",
                "animation"
              ]
            },
            "genres": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "drama",
                  "comedy",
                  "thriller",
                  "horror",
                  "sci_fi",
                  "fantasy",
                  "romance",
                  "action",
                  "crime",
                  "historical",
                  "family",
                  "documentary",
                  "mystery",
                  "adventure",
                  "animation",
                  "biopic"
                ]
              },
              "minItems": 1
            },
            "primaryAudience": {
              "type": "string",
              "enum": [
                "young_children",
                "family",
                "teens",
                "young_adults",
                "adults",
                "mature",
                "general",
                "niche"
              ]
            },
            "secondaryAudiences": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "young_children",
                  "family",
                  "teens",
                  "young_adults",
                  "adults",
                  "mature",
                  "general",
                  "niche"
                ]
              }
            },
            "developmentStage": {
              "type": "string",
              "enum": [
                "idea",
                "concept",
                "outline",
                "treatment",
                "draft_one",
                "draft_two",
                "polished_draft",
                "shooting_script",
                "post_production"
              ]
            },
            "priority": {
              "type": "string",
              "enum": [
                "low",
                "medium",
                "high",
                "critical"
              ]
            },
            "categories": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "story_structure",
                  "character",
                  "dialogue",
                  "visual_style",
                  "themes",
                  "world_building",
                  "market_positioning",
                  "cultural_context",
                  "production",
                  "sound_design",
                  "pacing"
                ]
              },
              "minItems": 1
            },
            "language": {
              "type": "string",
              "minLength": 2
            },
            "locale": {
              "type": "string",
              "pattern": "^[a-z]{2}-[A-Z]{2}$"
            },
            "analyst": {
              "type": "string",
              "minLength": 1
            },
            "collaborators": {
              "type": "array",
              "items": {
                "type": "string",
                "minLength": 1
              },
              "minItems": 1
            },
            "createdAt": {
              "type": "string",
              "format": "date-time"
            },
            "updatedAt": {
              "$ref": "#/definitions/AdvancedScreenplayModuleResult/properties/metadata/properties/createdAt"
            },
            "analysisWindow": {
              "type": "object",
              "properties": {
                "start": {
                  "$ref": "#/definitions/AdvancedScreenplayModuleResult/properties/metadata/properties/createdAt"
                },
                "end": {
                  "$ref": "#/definitions/AdvancedScreenplayModuleResult/properties/metadata/properties/createdAt"
                }
              },
              "required": [
                "start",
                "end"
              ],
              "additionalProperties": false
            },
            "wordCount": {
              "type": "integer",
              "exclusiveMinimum": 0
            },
            "runtimeMinutes": {
              "type": "integer",
              "exclusiveMinimum": 0
            },
            "logline": {
              "type": "string",
              "minLength": 1
            },
            "referenceWorks": {
              "type": "array",
              "items": {
                "type": "string",
                "minLength": 1
              }
            },
            "productionCompany": {
              "type": "string",
              "minLength": 1
            },
            "notes": {
              "type": "array",
              "items": {
                "type": "string",
                "minLength": 1
              }
            }
          },
          "required": [
            "workId",
            "workTitle",
            "workFormat",
            "genres",
            "primaryAudience",
            "developmentStage",
            "priority",
            "categories",
            "language",
            "analyst",
            "collaborators",
            "createdAt",
            "analysisWindow"
          ],
          "additionalProperties": false
        },
        "details": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "minLength": 1
              },
              "title": {
                "type": "string",
                "minLength": 1
              },
              "focus": {
                "type": "string",
                "enum": [
                  "structure",
                  "character",
                  "dialogue",
                  "theme",
                  "pacing",
                  "visual",
                  "audience",
                  "market",
                  "cultural",
                  "foreshadowing",
                  "recommendation",
                  "production",
                  "voice",
                  "tension"
                ]
              },
              "expositionMethod": {
                "type": "string",
                "enum": [
                  "action",
                  "dialogue",
                  "visual_symbolism",
                  "flashback",
                  "montage",
                  "voice_over",
                  "text_on_screen",
                  "subtext",
                  "music_cue"
                ]
              },
              "summary": {
                "type": "string",
                "minLength": 1
              },
              "personas": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string",
                      "minLength": 1
                    },
                    "type": {
                      "type": "string",
                      "enum": [
                        "protagonist",
                        "deuteragonist",
                        "antagonist",
                        "mentor",
                        "trickster",
                        "foil",
                        "shapeshifter",
                        "supporting"
                      ]
                    },
                    "goals": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "minLength": 1
                      },
                      "minItems": 1
                    },
                    "transformation": {
                      "type": "string",
                      "minLength": 1
                    },
                    "screenTimeShare": {
                      "type": "number",
                      "minimum": 0,
                      "maximum": 100
                    }
                  },
                  "required": [
                    "name",
                    "type",
                    "goals",
                    "transformation"
                  ],
                  "additionalProperties": false
                }
              },
              "insights": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "minLength": 1
                    },
                    "headline": {
                      "type": "string",
                      "minLength": 1
                    },
                    "analysisType": {
                      "type": "string",
                      "enum": [
                        "structure",
                        "character",
                        "dialogue",
                        "theme",
                        "pacing",
                        "visual",
                        "audience",
                        "market",
                        "cultural",
                        "foreshadowing",
                        "recommendation",
                        "production",
                        "voice",
                        "tension"
                      ]
                    },
                    "summary": {
                      "type": "string",
                      "minLength": 1
                    },
                    "impact": {
                      "type": "string",
                      "minLength": 1
                    },
                    "confidence": {
                      "type": "number",
                      "minimum": 0,
                      "maximum": 1
                    },
                    "supportingEvidence": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "referenceId": {
                            "type": "string",
                            "minLength": 1
                          },
                          "source": {
                            "type": "string",
                            "minLength": 1
                          },
                          "excerpt": {
                            "type": "string",
                            "minLength": 1
                          },
                          "location": {
                            "type": "string",
                            "minLength": 1
                          },
                          "confidence": {
                            "type": "number",
                            "minimum": 0,
                            "maximum": 1
                          }
                        },
                        "required": [
                          "referenceId",
                          "source",
                          "excerpt",
                          "location",
                          "confidence"
                        ],
                        "additionalProperties": false
                      },
                      "minItems": 1
                    },
                    "recommendedActions": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "minLength": 1
                      }
                    }
                  },
                  "required": [
                    "id",
                    "headline",
                    "analysisType",
                    "summary",
                    "impact",
                    "confidence",
                    "supportingEvidence"
                  ],
                  "additionalProperties": false
                },
                "minItems": 1
              },
              "beats": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "enum": [
                        "opening_image",
                        "inciting_incident",
                        "turning_point",
                        "midpoint",
                        "pinch_point",
                        "climax",
                        "resolution",
                        "tag",
                        "reversal",
                        "dark_night"
                      ]
                    },
                    "description": {
                      "type": "string",
                      "minLength": 1
                    },
                    "pages": {
                      "type": "object",
                      "properties": {
                        "start": {
                          "type": "integer",
                          "minimum": 0
                        },
                        "end": {
                          "type": "integer",
                          "minimum": 0
                        }
                      },
                      "required": [
                        "start",
                        "end"
                      ],
                      "additionalProperties": false
                    },
                    "intensity": {
                      "type": "number",
                      "minimum": 0,
                      "maximum": 100
                    }
                  },
                  "required": [
                    "type",
                    "description"
                  ],
                  "additionalProperties": false
                }
              },
              "conflicts": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "enum": [
                        "internal",
                        "interpersonal",
                        "environmental",
                        "social",
                        "technological",
                        "supernatural",
                        "ideological",
                        "economic"
                      ]
                    },
                    "antagonistType": {
                      "type": "string",
                      "enum": [
                        "personal",
                        "societal",
                        "environmental",
                        "technological",
                        "supernatural",
                        "internal",
                        "institutional"
                      ]
                    },
                    "status": {
                      "type": "string",
                      "enum": [
                        "unresolved",
                        "escalating",
                        "resolving",
                        "resolved"
                      ]
                    },
                    "summary": {
                      "type": "string",
                      "minLength": 1
                    },
                    "stakes": {
                      "type": "string",
                      "minLength": 1
                    }
                  },
                  "required": [
                    "type",
                    "antagonistType",
                    "status",
                    "summary",
                    "stakes"
                  ],
                  "additionalProperties": false
                }
              },
              "relationships": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "characters": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "minLength": 1
                      },
                      "minItems": 1
                    },
                    "relationshipType": {
                      "type": "string",
                      "enum": [
                        "ally",
                        "rival",
                        "romantic",
                        "family",
                        "mentor",
                        "antagonist",
                        "professional",
                        "unknown"
                      ]
                    },
                    "tone": {
                      "type": "string",
                      "minLength": 1
                    },
                    "strength": {
                      "type": "number",
                      "minimum": 0,
                      "maximum": 100
                    },
                    "notes": {
                      "type": "string",
                      "minLength": 1
                    }
                  },
                  "required": [
                    "characters",
                    "relationshipType",
                    "tone",
                    "strength"
                  ],
                  "additionalProperties": false
                }
              },
              "metrics": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string",
                      "minLength": 1
                    },
                    "score": {
                      "type": "number",
                      "minimum": 0,
                      "maximum": 100
                    },
                    "weight": {
                      "type": "number",
                      "minimum": 0,
                      "maximum": 1
                    },
                    "justification": {
                      "type": "string",
                      "minLength": 1
                    }
                  },
                  "required": [
                    "name",
                    "score",
                    "justification"
                  ],
                  "additionalProperties": false
                }
              }
            },
            "required": [
              "id",
              "title",
              "focus",
              "expositionMethod",
              "summary",
              "insights"
            ],
            "additionalProperties": false
          },
          "minItems": 1
        },
        "recommendations": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "minLength": 1
              },
              "title": {
                "type": "string",
                "minLength": 1
              },
              "description": {
                "type": "string",
                "minLength": 1
              },
              "priority": {
                "type": "string",
                "enum": [
                  "low",
                  "medium",
                  "high",
                  "critical"
                ]
              },
              "category": {
                "type": "string",
                "enum": [
                  "story_structure",
                  "character",
                  "dialogue",
                  "visual_style",
                  "themes",
                  "world_building",
                  "market_positioning",
                  "cultural_context",
                  "production",
                  "sound_design",
                  "pacing"
                ]
              },
              "focus": {
                "type": "string",
                "enum": [
                  "structure",
                  "character",
                  "dialogue",
                  "theme",
                  "pacing",
                  "visual",
                  "audience",
                  "market",
                  "cultural",
                  "foreshadowing",
                  "recommendation",
                  "production",
                  "voice",
                  "tension"
                ]
              },
              "estimatedEffortHours": {
                "type": "number",
                "minimum": 0
              },
              "owner": {
                "type": "string",
                "minLength": 1
              },
              "impact": {
                "type": "string",
                "minLength": 1
              },
              "dependencies": {
                "type": "array",
                "items": {
                  "type": "string",
                  "minLength": 1
                }
              },
              "successCriteria": {
                "type": "array",
                "items": {
                  "type": "string",
                  "minLength": 1
                },
                "minItems": 1
              }
            },
            "required": [
              "id",
              "title",
              "description",
              "priority",
              "category",
              "focus",
              "estimatedEffortHours",
              "owner",
              "impact",
              "successCriteria"
            ],
            "additionalProperties": false
          }
        },
        "quality_metrics": {
          "type": "object",
          "properties": {
            "narrativeCohesion": {
              "type": "number",
              "minimum": 0,
              "maximum": 100
            },
            "characterDepth": {
              "type": "number",
              "minimum": 0,
              "maximum": 100
            },
            "dialogueAuthenticity": {
              "type": "number",
              "minimum": 0,
              "maximum": 100
            },
            "pacingControl": {
              "type": "number",
              "minimum": 0,
              "maximum": 100
            },
            "thematicResonance": {
              "type": "number",
              "minimum": 0,
              "maximum": 100
            },
            "originality": {
              "type": "number",
              "minimum": 0,
              "maximum": 100
            },
            "productionFeasibility": {
              "type": "number",
              "minimum": 0,
              "maximum": 100
            },
            "audienceAlignment": {
              "type": "number",
              "minimum": 0,
              "maximum": 100
            },
            "localizationReadiness": {
              "type": "number",
              "minimum": 0,
              "maximum": 100
            },
            "confidenceInterval": {
              "type": "object",
              "properties": {
                "lowerBound": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 100
                },
                "upperBound": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 100
                }
              },
              "required": [
                "lowerBound",
                "upperBound"
              ],
              "additionalProperties": false
            },
            "qualitativeNotes": {
              "type": "array",
              "items": {
                "type": "string",
                "minLength": 1
              },
              "minItems": 1
            }
          },
          "required": [
            "narrativeCohesion",
            "characterDepth",
            "dialogueAuthenticity",
            "pacingControl",
            "thematicResonance",
            "originality",
            "productionFeasibility",
            "audienceAlignment",
            "localizationReadiness",
            "confidenceInterval",
            "qualitativeNotes"
          ],
          "additionalProperties": false
        },
        "next_steps": {
          "type": "object",
          "properties": {
            "immediate": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "minLength": 1
                  },
                  "description": {
                    "type": "string",
                    "minLength": 1
                  },
                  "owner": {
                    "type": "string",
                    "minLength": 1
                  },
                  "dueDate": {
                    "$ref": "#/definitions/AdvancedScreenplayModuleResult/properties/metadata/properties/createdAt"
                  },
                  "priority": {
                    "type": "string",
                    "enum": [
                      "low",
                      "medium",
                      "high",
                      "critical"
                    ]
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "planned",
                      "in_progress",
                      "blocked",
                      "completed"
                    ]
                  },
                  "successCriteria": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "minLength": 1
                    },
                    "minItems": 1
                  }
                },
                "required": [
                  "id",
                  "description",
                  "owner",
                  "dueDate",
                  "priority",
                  "status",
                  "successCriteria"
                ],
                "additionalProperties": false
              },
              "minItems": 1
            },
            "upcoming": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/AdvancedScreenplayModuleResult/properties/next_steps/properties/immediate/items"
              },
              "default": []
            },
            "reviewSchedule": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "milestone": {
                    "type": "string",
                    "minLength": 1
                  },
                  "date": {
                    "$ref": "#/definitions/AdvancedScreenplayModuleResult/properties/metadata/properties/createdAt"
                  },
                  "focus": {
                    "type": "string",
                    "enum": [
                      "structure",
                      "character",
                      "dialogue",
                      "theme",
                      "pacing",
                      "visual",
                      "audience",
                      "market",
                      "cultural",
                      "foreshadowing",
                      "recommendation",
                      "production",
                      "voice",
                      "tension"
                    ]
                  },
                  "notes": {
                    "type": "string",
                    "minLength": 1
                  }
                },
                "required": [
                  "milestone",
                  "date",
                  "focus"
                ],
                "additionalProperties": false
              },
              "minItems": 1
            },
            "communicationPlan": {
              "type": "object",
              "properties": {
                "stakeholders": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string",
                        "minLength": 1
                      },
                      "role": {
                        "type": "string",
                        "minLength": 1
                      },
                      "channel": {
                        "type": "string",
                        "minLength": 1
                      },
                      "cadence": {
                        "type": "string",
                        "minLength": 1
                      }
                    },
                    "required": [
                      "name",
                      "role",
                      "channel",
                      "cadence"
                    ],
                    "additionalProperties": false
                  },
                  "minItems": 1
                },
                "notes": {
                  "type": "string",
                  "minLength": 1
                }
              },
              "required": [
                "stakeholders"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "immediate",
            "reviewSchedule",
            "communicationPlan"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "title",
        "summary",
        "metadata",
        "details",
        "recommendations",
        "quality_metrics",
        "next_steps"
      ],
      "additionalProperties": false
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#"
}
